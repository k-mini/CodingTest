
# ğŸ“š ì£¼ì°¨ ìš”ê¸ˆ ê³„ì‚°

## ğŸ“Œ [ë¬¸ì œë§í¬](https://school.programmers.co.kr/learn/courses/30/lessons/92341)

### ë¬¸ì œ í•´ì„¤

- ì£¼ì°¨ì¥ì˜ ìš”ê¸ˆí‘œë¥¼ ë‹´ì€ ë¦¬ìŠ¤íŠ¸ feesì™€ ì°¨ëŸ‰ì˜ ì…ì¶œì°¨ ê¸°ë¡ì´ ë‹´ê¸´ ë¦¬ìŠ¤íŠ¸ recordsê°€ ì£¼ì–´ì¡Œì„ ë•Œ, ì°¨ëŸ‰ë³„ë¡œ ì£¼ì°¨ ìš”ê¸ˆì„ ê³„ì‚°í•˜ë ¤ê³  í•œë‹¤.
- ì£¼ì°¨ ìš”ê¸ˆ ê³„ì‚° ë°©ë²•
    - ëˆ„ì  ì£¼ì°¨ ì‹œê°„ì´ ê¸°ë³¸ ì‹œê°„ ì´í•˜ë¼ë©´, ê¸°ë³¸ ìš”ê¸ˆì„ ì²­êµ¬
    - ëˆ„ì  ì£¼ì°¨ ì‹œê°„ì´ ê¸°ë³¸ ì‹œê°„ì„ ì´ˆê³¼í•˜ë©´, ê¸°ë³¸ìš”ê¸ˆ + (ì´ˆê³¼í•œ ì‹œê°„ / ë‹¨ìœ„ ì‹œê°„) * ë‹¨ìœ„ ìš”ê¸ˆ  
    (ë‹¨, ì´ˆê³¼í•œ ì‹œê°„ì´ ë‹¨ìœ„ ì‹œê°„ìœ¼ë¡œ ë‚˜ëˆ„ì–´ ë–¨ì–´ì§€ì§€ ì•Šì„ ê²½ìš°, ì˜¬ë¦¼ ì²˜ë¦¬)
- feesëŠ” \[ ê¸°ë³¸ ì‹œê°„(ë¶„), ê¸°ë³¸ ìš”ê¸ˆ(ì›), ë‹¨ìœ„ ì‹œê°„(ë¶„), ë‹¨ìœ„ ìš”ê¸ˆ(ì›) \] ìœ¼ë¡œ ì´ë£¨ì–´ì ¸ ìˆë‹¤.
- recordsì˜ ê° ì›ì†ŒëŠ” "ì‹œê°„ ì°¨ëŸ‰ë²ˆí˜¸ ë‚´ì—­" í˜•ì‹ì˜ ë¬¸ìì—´ì´ë‹¤. 

### ë¬¸ì œ í’€ì´

- í´ë˜ìŠ¤ë¥¼ ì´ìš©í•˜ì—¬ í’€ì´í•œë‹¤.
- ë§ˆì§€ë§‰ ê¸°ë¡ê¹Œì§€ ë°˜ë³µë¬¸ì„ ëŒë©´ì„œ ì£¼ì°¨ì¥ì„ ì´ìš©í•œ ëˆ„ì  ì‹œê°„ì„ êµ¬í•œë‹¤.
- ì¶œì°¨ë¥¼ ë§ˆì§€ë§‰ì— í•˜ì§€ ì•Šì„ ê²½ìš°ê°€ ìˆê¸° ë•Œë¬¸ì—, flag ë³€ìˆ˜ë¥¼ ì´ìš©í•˜ì—¬ í˜„ì¬ ì°¨ëŸ‰ì´ ì¶œì°¨ ìƒíƒœì¸ì§€ ì…ì°¨ ìƒíƒœì¸ì§€ êµ¬ë¶„í•œë‹¤.  
 (ë§Œì•½ ì¶œì°¨ë¥¼ í•˜ì§€ ì•Šì•˜ì„ ê²½ìš°, 23:59ë¶„ì— ì¶œì°¨í•œ ê²ƒìœ¼ë¡œ updateë¥¼ í•œë‹¤.)

- 1ì°¨ í’€ì´

```
from math import ceil
from collections import defaultdict
class Parking:
    
    def __init__(self,fees):
        self.fees = fees
        self.total = 0
        
    def update(self,time,in_out):
        if in_out == 'IN':
            self.status = 'IN'
            self.intime = self.convert_time(time) 
        else:
            self.status = 'OUT'
            self.total += self.convert_time(time) - self.intime
        
    def charge(self):
        if self.status =='IN':
            self.update('23:59','OUT')
        
        if self.total <= self.fees[0]:
            return self.fees[1]
        else:
            return self.fees[1] + ceil( (self.total-self.fees[0]) /self.fees[2] )  * self.fees[3]
        
    def convert_time(self,time):
        return int(time[:2]) * 60 + int(time[-2:])
        
        
def solution(fees, records):
    
    car_dict = defaultdict(lambda : Parking(fees))
    
    for record in records:
        time, car, in_out= record.split()
        
        car_dict[car].update(time,in_out)

    
    
    result = [ v.charge() for k,v in sorted(car_dict.items()) ]
    
    return result
```

- 2ì°¨ í’€ì´

```
from math import ceil
from collections import defaultdict
class Parking :
    
    def __init__(self,base_time,base_fee,per_time,per_fee):
        self.total = 0
        self.t_time = 0
        self.in_time = 0
        self.out_time = 0
        self.base_time = base_time
        self.base_fee = base_fee
        self.per_time = per_time
        self.per_fee = per_fee
        self.flag = False
        
    def update(self,command, time ):
        time = convert_time(time) # '05:34' => 60 * 5 + 34 => 334
        
        #if not flag: self.out_time = 23*60 + 59
        if command == 'OUT':
            self.flag = True
            self.out_time = time
            self.t_time += (self.out_time - self.in_time)
        else:
            self.flag = False
            self.in_time = time
    
    def cal_fee(self):
        if not self.flag : self.update('OUT', '23:59')
        #print(self.in_time,self.out_time)
        if self.t_time <= self.base_time:
            self.total = self.base_fee
        else:
            self.total = self.base_fee + ceil( (self.t_time - self.base_time) / self.per_time ) * self.per_fee

def convert_time(time):
    h,m = map(int,time.split(':'))
    return  h * 60 + m

def solution(fees, records):
    base_time, base_fee, per_time, per_fee = fees
    car_dict = defaultdict(lambda : Parking(base_time,base_fee,per_time,per_fee ))
    result = []
    for record in records:
        time,car_number,command = record.split()
        
        print(f'{car_number} {command} ì—…ë°ì´íŠ¸')
        car_dict[car_number].update(command,time)
    
    for k,v in car_dict.items():
        v.cal_fee()
        result.append( (k,v.total) )
        
    result.sort()
    #print(result)
    return [ i[1] for i in result ] 
```
