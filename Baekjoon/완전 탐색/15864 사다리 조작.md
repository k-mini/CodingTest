
# ðŸ“š ì‚¬ë‹¤ë¦¬ ì¡°ìž‘

## ðŸ“Œ [ë¬¸ì œë§í¬](https://www.acmicpc.net/problem/15684)

### ë¬¸ì œ ìš”ì•½

- ì‚¬ë‹¤ë¦¬ ê²Œìž„ì€ Nê°œì˜ ì„¸ë¡œì„ ê³¼ Mê°œì˜ ê°€ë¡œì„ ìœ¼ë¡œ ì´ë£¨ì–´ì ¸ ìžˆë‹¤.
- ì¸ì ‘í•œ ì„¸ë¡œì„  ì‚¬ì´ì— ê°€ë¡œì„ ì„ ë†“ì„ ìˆ˜ ìžˆë‹¤.
- ë‘ ê°€ë¡œì„ ì´ ì—°ì†í•˜ê±°ë‚˜ ì„œë¡œ ì ‘í•˜ë©´ ì•ˆëœë‹¤. ê°€ë¡œì„ ì€ ì ì„  ìœ„ì— ìžˆì–´ì•¼ í•œë‹¤.
- ì‚¬ë‹¤ë¦¬ì— ê°€ë¡œì„ ì„ ì¶”ê°€í•´ì„œ, ië²ˆ ì„¸ë¡œì„ ì˜ ê²°ê³¼ê°€ ië²ˆì— ë‚˜ì˜¤ê²Œ í•˜ë ¤ê³  í•œë‹¤.
- ì¶”ê°€í•´ì•¼í•  ê°€ë¡œì„  ê°œìˆ˜ì˜ ìµœì†Ÿê°’ì„ êµ¬í•´ë¼.

### ë¬¸ì œ í’€ì´

- ìž¬ê·€í˜¸ì¶œì„ ì´ìš©í•œ dfsíƒìƒ‰ì„ ì‚¬ìš©í•˜ ëª¨ë“  ê²½ìš°ë¥¼ íƒìƒ‰í–ˆëŠ”ë° ì‹œê°„ì´ˆê³¼ê°€ ë°œìƒí–ˆë‹¤.

- ì‹œê°„ ì´ˆê³¼ ë°œìƒí•œ ì½”ë“œ

```
import sys
input = sys.stdin.readline

n,m,h = map(int,input().split()) # ì„¸ë¡œì„ ì˜ ê°œìˆ˜, ê°€ë¡œì„ ì˜ ê°œìˆ˜, ê°€ë¡œì„ ì„ ë†“ì„ ìˆ˜ ìžˆëŠ” ìœ„ì¹˜
l_set = set()
INF = 1e10
answer = INF
for _ in range(m):
    a,b = map(int,input().split())
    l_set.add((a,b)) # bë²ˆ ì„¸ë¡œì„ ì—ì„œ aë²ˆ ì ì„ ìœ„ì¹˜
    
# ì‚¬ë‹¤ë¦¬ ì—°ì†ë˜ì–´ ìžˆëŠ”ì§€ ì¡°ì‚¬
def test(x,y):
    # ì—°ì†ëœ ê°€ë¡œì„ ì´ ìžˆëŠ”ì§€ ì¡°ì‚¬
    if (x,y+1) in l_set or (x,y-1) in l_set or (x,y) in l_set:
        return False
    else:
        return True

# iê°€ ië¡œ ê°€ëŠ”ì§€ ê²€ì‚¬
def possible():
    
    for y in range(1,n+1):
        result = move(1,y)
        if result != y:
            return False
    return True

# ì‚¬ë‹¤ë¦¬ ì´ë™ í•¨ìˆ˜
def move(x,y):
    if x == h+1:
        return y
    else:
        if (x,y) in l_set:
            return move(x+1,y+1)
        elif (x,y-1) in l_set:
            return move(x+1,y-1)
        else:
            return move(x+1,y)
    
def dfs(cnt):
    global l_set,answer
    if cnt > 3: # 3ê°œ ì´ìƒì´ë©´ -1 ì¶œë ¥
        return
    # iê°€ ië¡œ ê°€ëŠ”ì§€ ê²€ì‚¬
    if possible():
        answer = min(cnt,answer)
    
    # ì‚¬ë‹¤ë¦¬ ë†“ê¸°
    for i in range(1,h+1):
        for j in range(1,n):
            
            if test(i,j):
                l_set.add((i,j))
                dfs(cnt+1)
                l_set.remove((i,j))
            
dfs(0)# ìˆ«ìžëŠ” ê°€ë¡œì„ ì„ ë†“ì€ ê°œìˆ˜
print(answer if answer != INF else -1)
```

- ì‚¬ë‹¤ë¦¬ë¥¼ ê³„ì† ì²˜ìŒë¶€í„° ë†“ëŠ” ë¶€ë¶„ê³¼ ì„¸ë¡œì„ ì´ ië¡œ ê°€ëŠ”ì§€ í™•ì¸í•˜ëŠ” í•¨ìˆ˜ë¥¼ ìž¬ê·€í•¨ìˆ˜ë¡œ êµ¬í˜„í•´ì„œ ì‹œê°„ì´ˆê³¼ê°€ ë°œìƒí•œ ê²ƒ ê°™ë‹¤.

- ë‹¤ë¥¸ ì‚¬ëžŒì˜ í’€ì´

```
import sys
input = sys.stdin.readline

def check():
    for i in range(n):
        temp = i
        for j in range(h):
            if graph[j][temp]: # ì˜¤ë¥¸ìª½ì´ 1ì¸ ê²½ìš°
                temp += 1
            elif temp > 0 and graph[j][temp-1]:
                temp -= 1
        if temp != i:
            return False
    return True

def dfs(cnt,x,y):
    global ans
    if ans <= cnt:
        return
    if check():
        ans = min(ans,cnt)
        return
    if cnt == 3:
        return
    
    for i in range(x,h):
        k = y if i == x else 0
        for j in range(k,n-1):
            if graph[i][j] == 0:
                if graph[i][j+1] == 1 or (j > 0 and graph[i][j-1] == 1): continue
                    
                graph[i][j] = 1
                dfs(cnt+1,i,j+2)
                graph[i][j] = 0
    
n, m, h = map(int, input().split())
graph = [ [0] * n for _ in range(h)]

for _ in range(m):
    a, b = map(int, input().split()) # ê°€ë¡œ, ì„¸ë¡œì„ 
    graph[a-1][b-1] = 1

ans = 4
dfs(0,0,0)
print(ans if ans <= 3 else -1)
```


